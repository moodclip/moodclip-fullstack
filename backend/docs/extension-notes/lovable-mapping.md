# Lovable.dev UI ↔ Existing Extension Component Map

_Date: 2025-09-19_

| Lovable route / component | Purpose in Lovable build | Existing extension equivalent | Wiring notes |
| --- | --- | --- | --- |
| `/` → `PipelineContainer` | Full-screen cinematic pipeline showing upload → export stages with progress simulation and CTA to launch clip builder. | `HeroUploader` + surrounding HUD in the current Shopify block (compiled bundle + `assets/app-block.css`). | Replace the HUD/hero markup with Lovable’s pipeline sections while keeping upload controls wired to `/proxy/uploads` and the existing auth guards. Need to port the background/full-bleed styles into `.mc-editor-host` so the section stays edge-to-edge. |
| `PipelineContainer` → `StagePanel` cards | Individual stage cards with animations, dynamic messaging, Pro gating. | Existing hero cards (CSS classes like `._hud_*`, `._segmentBtn_*`) that show current workflow status. | Rewire stage state to real project progress (`/proxy/projects` + `/proxy/status`) instead of simulated timers. Use existing polling hook plumbing for data; drop duplicated HUD logic to avoid conflicting progress indicators. |
| `PipelineContainer` → uploader CTA (`Upload` button + Rive animation) | Primary call-to-action to upload media, includes `uploader.riv` animation. | Current Uppy dashboard + static background video (see `src/assets/` and compiled bundle). | Embed the existing Uppy instance inside Lovable’s upload step. Rive asset already present in `moodclip-frontend/src/assets/uploader.riv`; need to confirm parity with extension asset folder (`src/assets`). |
| `/build-clip` → `ClipBuilder` page | Main transcript + clip editing workspace composed of `BuildClipSection`, `TranscriptSection`, `VideoPlayerSection`. | `TranscriptEditor` React tree inside the extension (compiled, depends on Firestore snapshots, `useStatusPolling`). | Swap the legacy transcript/editor UI with Lovable’s components while preserving core behaviors: (1) transcript word playback, (2) AI suggestion highlighting, (3) clip queueing via `/proxy/clip/:videoId`, (4) download buttons tied to signed URLs. Need to port Firestore polling logic or replace with proxy-fed data per spec. |
| `ClipBuilder` → `BuildClipSection` | AI bubbles + clip lane management. | `PendingClipsSidebar` + existing clip list + create clip toolbar in legacy UI. | Map backend data (`clipStatuses`, AI suggestions) to Lovable clip structures. Ensure clip creation still posts to `/proxy/clip/:videoId` and lane displays queue states. |
| `ClipBuilder` → `TranscriptSection` | Text-based transcript editing (selection, deletion, add clip). | `TranscriptEditor`’s main transcript pane. | Reuse timing + word-index mapping logic from legacy editor (likely needs to be extracted from the compiled bundle or backend-provided mapping). Must continue to support AI suggestion overlays from Firestore / status endpoint. |
| `ClipBuilder` → `VideoPlayerSection` | Video playback controls, play modes (`full`, `selection`, `lane`). | `VideoPlayer.tsx` portion of the current editor (not available in source but present in bundle). | Ensure video stream still sourced via `/proxy/stream/:videoId` and playback state stays in sync with transcript selection. |
| 404 / fallback (`NotFound.tsx`) | Simple error page for unmatched routes. | No current theme extension equivalent (single-page app). | Optional to include; ensure hash-based routing still renders a friendly state when no project is loaded. |

## Duplications / gaps
- Lovable build assumes TanStack Query for data fetching; the extension currently uses bespoke hooks (`useProjects`, `useStatusPolling`). Decide whether to adopt TanStack or adapt the hooks to Lovable state containers.
- The Lovable TranscriptSection operates on static mock data; we need to connect it to the backend transcript payload (Firestore words array). Extraction of the existing word-index helpers from the compiled bundle may require rewriting them.
- Lovable UI has a richer clip lane (drag/drop). Legacy editor already enforces queue order via Firestore; ensure collisions don’t occur when reordering locally compared to backend states (render queue is append-only today).
- No customer-facing projects index exists in Lovable build; the extension relies on `ProjectsSidebar`. We must decide whether to retain a sidebar listing inside the pipeline screen or introduce a new Lovable component for project switching.
- Lovable styling is Tailwind/shadcn-first, while the extension ships a custom CSS bundle. We’ll need a design token bridge (global CSS variables / reset) to avoid conflicts when both stylesheets coexist during migration.
