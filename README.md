# moodclip-fullstack

Unified mono-repo that houses the Shopify backend as well as the full React experience that now powers the uploader extension. The repo is organized around the Shopify app with the frontend embedded directly inside the extension workspace so that deployments stay in sync.

## Repository layout

- `backend/` – Remix-based Shopify app, Prisma layer, Docker and Cloud Build assets.
- `backend/extensions/moodclip-uploader/` – Shopify extension with the real web app under `web-app/` plus extension bootstrap code in `src/`.
- `backend/extensions/moodclip-uploader/assets` / `blocks` / `locales` – Shopify extension artifacts generated by the build step.

## Key commands

From `backend/` run:

```bash
npm install          # install backend + extension dependencies
npm run dev          # Remix dev server
npm run build        # Builds Remix app and extension bundle
```

For frontend-specific workflows from the extension folder:

```bash
cd backend/extensions/moodclip-uploader
npm run dev:web      # Vite dev server for the embedded web app
npm run dev:ext      # Extension bundle preview using Shopify tooling
npm run build:web    # Standalone web bundle output to web-app/dist
npm run build:ext    # Extension UMD bundle output to assets/
```

## Environment

The extension shares Tailwind, PostCSS, and TypeScript config between the web app (`web-app/`) and the extension bootstrap (`src/`). Firebase helpers and Shopify auth utilities remain in `src/lib`.

Backend environment variables continue to be managed through `backend/.env` and the Shopify CLI (`shopify app env`). See `backend/README.md` for deployment details.

## Next steps

- Update CI/CD workflows to execute `npm run build` from `backend/`.
- Point Shopify app configuration to the regenerated `assets/app-block.v4.js` bundle.
- Retire the legacy standalone repos once the mono-repo is pushed to `moodclip-fullstack`.
